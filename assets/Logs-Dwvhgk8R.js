import{r as s,g as c,j as e,w as p,i as f}from"./index-_RlfeBLV.js";import{S as l}from"./SidebarAdmin-Ai76bB7Y.js";import{S as y}from"./SectionTitle-P0FvPO9X.js";import{g as h}from"./theme-eDaETbEk.js";const N=()=>{const[a,m]=s.useState(c()),[r,o]=s.useState([]),[u,x]=s.useState(!0),[d,g]=s.useState(""),[i,j]=s.useState(()=>h());return s.useEffect(()=>{const t=()=>m(c());return window.addEventListener("auth-changed",t),()=>window.removeEventListener("auth-changed",t)},[]),s.useEffect(()=>{const t=()=>j(h());return window.addEventListener("theme-changed",t),()=>window.removeEventListener("theme-changed",t)},[]),s.useEffect(()=>{const t=document.body;return t.classList.add("theme-page-admin"),i==="light"?t.classList.add("theme-light"):t.classList.remove("theme-light"),()=>{t.classList.remove("theme-page-admin"),t.classList.remove("theme-light")}},[i]),s.useEffect(()=>{(async()=>{if(!(!a||a.user.role!=="SUPER_ADMIN"))try{const n=await p(f(),200);o(n)}catch(n){g(n.message)}finally{x(!1)}})()},[a]),!a||a.user.role!=="SUPER_ADMIN"?e.jsxs("div",{className:`admin-layout ${i==="light"?"theme-light":""}`,children:[e.jsx(l,{active:"Logs"}),e.jsx("main",{className:"admin-content",children:e.jsx("p",{className:"error-text",children:"Akses ditolak. Hanya super admin yang dapat melihat log."})})]}):e.jsxs("div",{className:`admin-layout ${i==="light"?"theme-light":""}`,children:[e.jsx(l,{active:"Logs"}),e.jsxs("main",{className:"admin-content",children:[e.jsx("h1",{children:"Log Aktivitas"}),e.jsx("p",{className:"muted-text",children:"Riwayat aksi penting dari pengguna, admin, dan super admin. Data ditampilkan 200 entri terbaru."}),d&&e.jsx("p",{className:"error-text",children:d}),e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsx(y,{title:"Aktivitas Terbaru",subtitle:"Sumber: aksi login, CRUD game, dan review."}),u?e.jsx("p",{children:"Sedang memuat log..."}):r.length===0?e.jsx("p",{children:"Tidak ada log untuk ditampilkan."}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Waktu"}),e.jsx("th",{children:"Pengguna"}),e.jsx("th",{children:"Aksi"}),e.jsx("th",{children:"Target"}),e.jsx("th",{children:"Detail"}),e.jsx("th",{children:"IP"})]})}),e.jsx("tbody",{children:r.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(t.created_at).toLocaleString()}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{children:t.user_name||"Tidak dikenal"}),e.jsxs("span",{className:"muted-text",style:{fontSize:"0.85rem"},children:[t.user_email||"-"," (",t.role||"N/A",")"]})]})}),e.jsx("td",{children:t.action}),e.jsxs("td",{children:[t.entity_type||"-",t.entity_id?` #${t.entity_id}`:""]}),e.jsx("td",{children:t.meta?e.jsx("code",{style:{fontSize:"0.85rem"},children:JSON.stringify(t.meta)}):"-"}),e.jsx("td",{children:t.ip||"-"})]},t.id))})]})})]})]})]})};export{N as default};
