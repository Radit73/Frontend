import{k as j,r as s,l as b,j as a,n as w}from"./index-_RlfeBLV.js";import{g as u}from"./theme-eDaETbEk.js";const y=[{id:"avatar-alya",label:"Alya",url:"https://avataaars.io/?avatarStyle=Circle&topType=LongHairStraight2&accessoriesType=Round&hairColor=BrownDark&facialHairType=Blank&clotheType=BlazerShirt&eyeType=Happy&eyebrowType=DefaultNatural&mouthType=Smile&skinColor=Light"},{id:"avatar-sena",label:"Sena",url:"https://avataaars.io/?avatarStyle=Circle&topType=ShortHairShortWaved&accessoriesType=Wayfarers&hairColor=Black&facialHairType=Blank&clotheType=Overall&clotheColor=Blue03&eyeType=Default&eyebrowType=UpDown&mouthType=Smile&skinColor=Brown"},{id:"avatar-daru",label:"Daru",url:"https://avataaars.io/?avatarStyle=Circle&topType=ShortHairDreads01&accessoriesType=Blank&hairColor=Black&facialHairType=BeardMedium&facialHairColor=Black&clotheType=Hoodie&clotheColor=PastelBlue&eyeType=Happy&eyebrowType=RaisedExcited&mouthType=Smile&skinColor=DarkBrown"},{id:"avatar-lila",label:"Lila",url:"https://avataaars.io/?avatarStyle=Circle&topType=LongHairCurly&accessoriesType=Blank&hairColor=Brown&facialHairType=Blank&clotheType=ShirtCrewNeck&clotheColor=Pink&eyeType=Wink&eyebrowType=DefaultNatural&mouthType=Twinkle&skinColor=Light"},{id:"avatar-bima",label:"Bima",url:"https://avataaars.io/?avatarStyle=Circle&topType=ShortHairTheCaesar&accessoriesType=Sunglasses&hairColor=BrownDark&facialHairType=Blank&clotheType=GraphicShirt&clotheColor=Heather&graphicType=Skull&eyeType=Squint&eyebrowType=AngryNatural&mouthType=Serious&skinColor=Yellow"}],N=()=>{const f=j(),[o,g]=s.useState(()=>u()),[r,h]=s.useState({name:"",email:"",password:"",confirmPassword:"",profilePhoto:y[0].url}),[t,n]=s.useState(1),[p,m]=s.useState(!1),{addToast:l}=b();s.useEffect(()=>{const e=()=>g(u());return window.addEventListener("theme-changed",e),()=>window.removeEventListener("theme-changed",e)},[]),s.useEffect(()=>{const e=document.body;return e.classList.add("theme-page-auth"),o==="light"?e.classList.add("theme-light"):e.classList.remove("theme-light"),()=>{e.classList.remove("theme-page-auth"),e.classList.remove("theme-light")}},[o]);const i=e=>{h({...r,[e.target.name]:e.target.value})},v=e=>{h(c=>({...c,profilePhoto:e}))},d=()=>!r.name||!r.email||!r.password||!r.confirmPassword?(l("Semua field wajib diisi.","error"),!1):r.password!==r.confirmPassword?(l("Konfirmasi password tidak cocok.","error"),!1):!0,k=e=>{e.preventDefault(),d()&&n(2)},T=()=>{n(1)},x=async e=>{if(e.preventDefault(),!d()){n(1);return}if(!r.profilePhoto){l("Silakan pilih foto profil.","error");return}try{m(!0),await w({name:r.name,email:r.email,password:r.password,role:"USER",profilePhoto:r.profilePhoto}),l("Registrasi berhasil, silakan login.","success"),setTimeout(()=>f("/login"),1200)}catch(c){l(c.message||"Gagal melakukan registrasi.","error")}finally{m(!1)}};return a.jsx("div",{className:`page auth-page section ${o==="light"?"theme-light":""}`,children:a.jsxs("div",{className:"auth-card card",children:[a.jsx("h2",{children:"Daftar"}),a.jsx("p",{children:"Bergabung dengan komunitas reviewer game lokal."}),a.jsxs("div",{className:"auth-stepper",children:[a.jsxs("div",{className:`auth-stepper__item ${t>=1?"is-active":""} ${t>1?"is-complete":""}`,children:[a.jsx("span",{children:"1"}),a.jsx("p",{children:"Data Akun"})]}),a.jsx("div",{className:`auth-stepper__divider ${t>1?"is-complete":""}`}),a.jsxs("div",{className:`auth-stepper__item ${t===2?"is-active":""}`,children:[a.jsx("span",{children:"2"}),a.jsx("p",{children:"Foto Profil"})]})]}),t===1?a.jsxs("form",{className:"auth-form",onSubmit:k,children:[a.jsxs("label",{children:["Nama Lengkap",a.jsx("input",{type:"text",name:"name",placeholder:"Nama kamu",value:r.name,onChange:i})]}),a.jsxs("label",{children:["Email",a.jsx("input",{type:"email",name:"email",placeholder:"email@contoh.com",value:r.email,onChange:i})]}),a.jsxs("label",{children:["Password",a.jsx("input",{type:"password",name:"password",placeholder:"********",value:r.password,onChange:i})]}),a.jsxs("label",{children:["Konfirmasi Password",a.jsx("input",{type:"password",name:"confirmPassword",placeholder:"********",value:r.confirmPassword,onChange:i})]}),a.jsx("button",{type:"submit",className:"btn-primary auth-btn",children:"Lanjut Pilih Avatar"})]}):a.jsxs("form",{className:"auth-form",onSubmit:x,children:[a.jsx("p",{className:"avatar-picker__label",children:"Pilih gaya avatar animasi yang paling menggambarkan kamu."}),a.jsx("div",{className:"avatar-picker",children:a.jsx("div",{className:"avatar-picker__grid",children:y.map(e=>a.jsxs("label",{className:`avatar-option ${r.profilePhoto===e.url?"avatar-option--selected":""}`,children:[a.jsx("input",{type:"radio",name:"profilePhoto",value:e.url,checked:r.profilePhoto===e.url,onChange:()=>v(e.url)}),a.jsx("img",{src:e.url,alt:`Avatar ${e.label}`,loading:"lazy"}),a.jsx("span",{children:e.label})]},e.id))})}),a.jsxs("div",{className:"auth-form__actions",children:[a.jsx("button",{type:"button",className:"btn-outline",onClick:T,children:"Kembali"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:p,children:p?"Memproses...":"Selesai Daftar"})]})]}),a.jsxs("p",{className:"auth-switch",children:["Sudah punya akun? ",a.jsx("a",{href:"/login",children:"Masuk"})]}),a.jsxs("p",{className:"auth-switch small",children:["Developer ingin akses admin? ",a.jsx("a",{href:"/register/admin",children:"Gunakan halaman khusus admin"}),"."]})]})})};export{N as default};
